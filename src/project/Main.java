//
//
//  Generated by StarUML(tm) Java Add-In
//
//  @ Project : Untitled
//  @ File Name : Main.java
//  @ Date : 2017. 03. 17.
//  @ Author : 
//
//

package project;

import java.io.IOException;
import java.util.Scanner;

public class Main {
    public static int tabs = 0;

    public static void main(String[] args) {
        int b=0;
        while (b!=7){
        b = menuWrite();
        while (b < 1 || b > 7) {
            System.out.println("Ilyen parancs nem létezik");
            b = menuWrite();
        }
        runSkeleton(b);
        }
    }

    public static int menuWrite() {
        System.out.print("\n \nMenü:" + "\n" +
                "1. Váltó állítása" + "\n" +
                "2. Alagút létrehozása" + "\n" +
                "3. Alagút törlése" + "\n" +
                "4. Vonat mozgatása" + "\n" +
                "5. Leszállás" + "\n" +
                "6. Játék kimenete" + "\n" +
                "7. Kilépés" + "\n" +"\n" +
                "? Adja meg a parancs kódját: "
        );
        Scanner sc = new Scanner(System.in);
        int a = 0;
        try {
            a = sc.nextInt();
        } catch (Exception e) {
        }
        return a;
    }

    public static void runSkeleton(int b) {
        switch (b) {
            case 1:
                System.out.println(b + ". Váltó állítása");
                changeSwitch();
                break;
            case 2:
                System.out.println(b + ". Alagút létrehozása");
                AddTunnelEntrance();
                break;
            case 3:
                System.out.println(b + ". Alagút törlése");
                RemoveTunnelEntrance();
                break;
            case 4:
                System.out.println(b + ". Vonat mozgatása");
                moveTrains();
                break;
            case 5:
                System.out.println(b + ". Leszállás");
                getOffPass();
                break;
            case 6:
                System.out.println(b + ". Játék kimenete");
                break;
            case 7:
                System.out.println(b + ". Kilépés");
                break;
        }
    }

    public static void changeSwitch() {
        System.out.print("? 1.1. Szeretné átállítani a váltó kimenetét? I/N: ");
        char c = 0;
            try {
                c = (char) System.in.read();
            } catch (Exception e) {
                e.printStackTrace();
            }
            if (c == 'I' || c == 'i') {
            Switch s = new Switch(1, 1, null, null, null);
            s.changeOutput();
        }
    }

    public static void moveTrains() {
        Model map = new Model();
        map.moveEngines();
    }

    public static void getOffPass() {
        Car c1 = new Car();
        Car c2 = new Car();
        c2.setPrevTrain(c1);
        Station st = new Station();
        st.addTrain(c2);
    }

    public static void AddTunnelEntrance () {
        Main.tabs++;
        TunnelEntrance test = new TunnelEntrance(0, 0, null, null, null);
        System.out.print("?");
        for(int j = 0 ; j < tabs ; j++){
            System.out.print("\t");
        }
        System.out.print(" 2.1 Hány alagút van a pályán?  0/1/2: ");
        int i = 0;
        try {
            i = Character.getNumericValue(System.in.read());
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (i == 0) {
            System.out.print("?");
            for(int j = 0 ; j < tabs ; j++){
                System.out.print("\t");
            }
            System.out.print(" 2.2 Érvényes helyre akarja építeni? I/N: ");
            char c = 0;
            try {
                System.in.read();
                c = (char) System.in.read();
                if (c == 'I' || c == 'i') {
                    TunnelEntrance te = new TunnelEntrance(0, 0, null, null, null);
                }

            } catch (Exception e) {
                e.printStackTrace();
            }

        }
        if (i == 1) {
            System.out.print("?");
            for(int j = 0 ; j < tabs ; j++){
                System.out.print("\t");
            }
            System.out.print(" 2.2 Érvényes helyre akarja építeni? I/N: ");
            char c = 0;
            try {
                System.in.read();
                c = (char) System.in.read();
                if (c == 'I' || c == 'i') {
                    TunnelEntrance te = new TunnelEntrance(0, 0, null, null, null);
                    te.changeOutput();
                    test.setSecond(te);
                    test.changeOutput();
                } else {
                    //System.out.print("Kettőnél több alagutat nem hozhat létre! :( ");
                }
            } catch (Exception e) {
                e.printStackTrace();
            }

            Main.tabs--;
        }
    }

    public static void RemoveTunnelEntrance(){
        Main.tabs++;
        TunnelEntrance test = new TunnelEntrance(0,0,null,null,null);
        TunnelEntrance test1 = new TunnelEntrance(0,0,null,null,null);
        System.out.print("?");
        for(int j = 0 ; j < tabs ; j++){
            System.out.print("\t");
        }
        System.out.print(" 3.1 Hány alagút van a pályán?  0/1/2: ");
        int i = 0;
        try {
            i = Character.getNumericValue(System.in.read());
        } catch (Exception e) {
            e.printStackTrace();
        }
        if (i == 2) {
            test1.changeOutput();
        }
        if(i == 1){

        }
        else {
            //System.out.print("Már nincs eltávolítandó alagút");
        }
        Main.tabs--;
    }
}
